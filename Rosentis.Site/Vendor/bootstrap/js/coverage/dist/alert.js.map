{"version":3,"file":"alert.js","sources":["../../src/alert.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.3.1): alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Data from './dom/data'\nimport EventHandler from './dom/eventHandler'\nimport SelectorEngine from './dom/selectorEngine'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'alert'\nconst VERSION             = '4.3.1'\nconst DATA_KEY            = 'bs.alert'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\n\nconst Selector = {\n  DISMISS : '[data-dismiss=\"alert\"]'\n}\n\nconst Event = {\n  CLOSE          : `close${EVENT_KEY}`,\n  CLOSED         : `closed${EVENT_KEY}`,\n  CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  ALERT : 'alert',\n  FADE  : 'fade',\n  SHOW  : 'show'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Alert {\n  constructor(element) {\n    this._element = element\n    if (this._element) {\n      Data.setData(element, DATA_KEY, this)\n    }\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // Public\n\n  close(element) {\n    let rootElement = this._element\n    if (element) {\n      rootElement = this._getRootElement(element)\n    }\n\n    const customEvent = this._triggerCloseEvent(rootElement)\n\n    if (customEvent === null || customEvent.defaultPrevented) {\n      return\n    }\n\n    this._removeElement(rootElement)\n  }\n\n  dispose() {\n    Data.removeData(this._element, DATA_KEY)\n    this._element = null\n  }\n\n  // Private\n\n  _getRootElement(element) {\n    const selector = Util.getSelectorFromElement(element)\n    let parent     = false\n\n    if (selector) {\n      parent = SelectorEngine.findOne(selector)\n    }\n\n    if (!parent) {\n      parent = SelectorEngine.closest(element, `.${ClassName.ALERT}`)\n    }\n\n    return parent\n  }\n\n  _triggerCloseEvent(element) {\n    return EventHandler.trigger(element, Event.CLOSE)\n  }\n\n  _removeElement(element) {\n    element.classList.remove(ClassName.SHOW)\n\n    if (!element.classList.contains(ClassName.FADE)) {\n      this._destroyElement(element)\n      return\n    }\n\n    const transitionDuration = Util.getTransitionDurationFromElement(element)\n\n    EventHandler\n      .one(element, Util.TRANSITION_END, (event) => this._destroyElement(element, event))\n    Util.emulateTransitionEnd(element, transitionDuration)\n  }\n\n  _destroyElement(element) {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element)\n    }\n\n    EventHandler.trigger(element, Event.CLOSED)\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = Data.getData(this, DATA_KEY)\n\n      if (!data) {\n        data = new Alert(this)\n      }\n\n      if (config === 'close') {\n        data[config](this)\n      }\n    })\n  }\n\n  static _handleDismiss(alertInstance) {\n    return function (event) {\n      if (event) {\n        event.preventDefault()\n      }\n\n      alertInstance.close(this)\n    }\n  }\n\n  static _getInstance(element) {\n    return Data.getData(element, DATA_KEY)\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\nEventHandler\n  .on(document, Event.CLICK_DATA_API, Selector.DISMISS, Alert._handleDismiss(new Alert()))\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .alert to jQuery only if jQuery is present\n */\n\nconst $ = Util.jQuery\nif (typeof $ !== 'undefined') {\n  const JQUERY_NO_CONFLICT = $.fn[NAME]\n  $.fn[NAME]               = Alert._jQueryInterface\n  $.fn[NAME].Constructor   = Alert\n  $.fn[NAME].noConflict    = () => {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return Alert._jQueryInterface\n  }\n}\n\nexport default Alert\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","Selector","DISMISS","Event","CLOSE","CLOSED","CLICK_DATA_API","ClassName","ALERT","FADE","SHOW","Alert","element","_element","Data","setData","close","rootElement","_getRootElement","customEvent","_triggerCloseEvent","defaultPrevented","_removeElement","dispose","removeData","selector","Util","getSelectorFromElement","parent","SelectorEngine","findOne","closest","EventHandler","trigger","classList","remove","contains","_destroyElement","transitionDuration","getTransitionDurationFromElement","one","TRANSITION_END","event","emulateTransitionEnd","parentNode","removeChild","_jQueryInterface","config","each","data","getData","_handleDismiss","alertInstance","preventDefault","_getInstance","on","document","$","jQuery","JQUERY_NO_CONFLICT","fn","Constructor","noConflict"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}