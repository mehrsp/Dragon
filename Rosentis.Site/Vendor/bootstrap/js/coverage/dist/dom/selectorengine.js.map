{"version":3,"file":"selectorengine.js","sources":["../../../src/dom/selectorEngine.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.3.1): dom/selectorEngine.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Polyfill from './polyfill'\nimport Util from '../util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst findFn = Polyfill.find\nconst findOne = Polyfill.findOne\nconst NODE_TEXT = 3\n\nconst SelectorEngine = {\n  matches(element, selector) {\n    return element.matches(selector)\n  },\n\n  find(selector, element = document.documentElement) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    return findFn.call(element, selector)\n  },\n\n  findOne(selector, element = document.documentElement) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    return findOne.call(element, selector)\n  },\n\n  children(element, selector) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    const children = Util.makeArray(element.children)\n\n    return children.filter((child) => this.matches(child, selector))\n  },\n\n  parents(element, selector) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    const parents = []\n    let ancestor = element.parentNode\n\n    while (ancestor && ancestor.nodeType === Node.ELEMENT_NODE && ancestor.nodeType !== NODE_TEXT) {\n      if (this.matches(ancestor, selector)) {\n        parents.push(ancestor)\n      }\n\n      ancestor = ancestor.parentNode\n    }\n\n    return parents\n  },\n\n  closest(element, selector) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    return element.closest(selector)\n  },\n\n  prev(element, selector) {\n    if (typeof selector !== 'string') {\n      return null\n    }\n\n    const siblings = []\n    let previous = element.previousSibling\n\n    while (previous && previous.nodeType === Node.ELEMENT_NODE && previous.nodeType !== NODE_TEXT) {\n      if (this.matches(previous, selector)) {\n        siblings.push(previous)\n      }\n\n      previous = previous.previousSibling\n    }\n\n    return siblings\n  }\n}\n\nexport default SelectorEngine\n"],"names":["findFn","Polyfill","find","findOne","NODE_TEXT","SelectorEngine","matches","element","selector","document","documentElement","call","children","Util","makeArray","filter","child","parents","ancestor","parentNode","nodeType","Node","ELEMENT_NODE","push","closest","prev","siblings","previous","previousSibling"],"mappings":"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"}