{"version":3,"file":"collapse.js","sources":["../../src/collapse.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.3.1): collapse.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Data from './dom/data'\nimport EventHandler from './dom/eventHandler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selectorEngine'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'collapse'\nconst VERSION             = '4.3.1'\nconst DATA_KEY            = 'bs.collapse'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\n\nconst Default = {\n  toggle : true,\n  parent : ''\n}\n\nconst DefaultType = {\n  toggle : 'boolean',\n  parent : '(string|element)'\n}\n\nconst Event = {\n  SHOW           : `show${EVENT_KEY}`,\n  SHOWN          : `shown${EVENT_KEY}`,\n  HIDE           : `hide${EVENT_KEY}`,\n  HIDDEN         : `hidden${EVENT_KEY}`,\n  CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  SHOW       : 'show',\n  COLLAPSE   : 'collapse',\n  COLLAPSING : 'collapsing',\n  COLLAPSED  : 'collapsed'\n}\n\nconst Dimension = {\n  WIDTH  : 'width',\n  HEIGHT : 'height'\n}\n\nconst Selector = {\n  ACTIVES     : '.show, .collapsing',\n  DATA_TOGGLE : '[data-toggle=\"collapse\"]'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Collapse {\n  constructor(element, config) {\n    this._isTransitioning = false\n    this._element         = element\n    this._config          = this._getConfig(config)\n    this._triggerArray    = Util.makeArray(SelectorEngine.find(\n      `[data-toggle=\"collapse\"][href=\"#${element.id}\"],` +\n      `[data-toggle=\"collapse\"][data-target=\"#${element.id}\"]`\n    ))\n\n    const toggleList = Util.makeArray(SelectorEngine.find(Selector.DATA_TOGGLE))\n    for (let i = 0, len = toggleList.length; i < len; i++) {\n      const elem = toggleList[i]\n      const selector = Util.getSelectorFromElement(elem)\n      const filterElement = Util.makeArray(SelectorEngine.find(selector))\n        .filter((foundElem) => foundElem === element)\n\n      if (selector !== null && filterElement.length) {\n        this._selector = selector\n        this._triggerArray.push(elem)\n      }\n    }\n\n    this._parent = this._config.parent ? this._getParent() : null\n\n    if (!this._config.parent) {\n      this._addAriaAndCollapsedClass(this._element, this._triggerArray)\n    }\n\n    if (this._config.toggle) {\n      this.toggle()\n    }\n\n    Data.setData(element, DATA_KEY, this)\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  // Public\n\n  toggle() {\n    if (this._element.classList.contains(ClassName.SHOW)) {\n      this.hide()\n    } else {\n      this.show()\n    }\n  }\n\n  show() {\n    if (this._isTransitioning ||\n      this._element.classList.contains(ClassName.SHOW)) {\n      return\n    }\n\n    let actives\n    let activesData\n\n    if (this._parent) {\n      actives = Util.makeArray(SelectorEngine.find(Selector.ACTIVES, this._parent))\n        .filter((elem) => {\n          if (typeof this._config.parent === 'string') {\n            return elem.getAttribute('data-parent') === this._config.parent\n          }\n\n          return elem.classList.contains(ClassName.COLLAPSE)\n        })\n\n      if (actives.length === 0) {\n        actives = null\n      }\n    }\n\n    const container = SelectorEngine.findOne(this._selector)\n    if (actives) {\n      const tempActiveData = actives.filter((elem) => container !== elem)\n      activesData = tempActiveData[0] ? Data.getData(tempActiveData[0], DATA_KEY) : null\n\n      if (activesData && activesData._isTransitioning) {\n        return\n      }\n    }\n\n    const startEvent = EventHandler.trigger(this._element, Event.SHOW)\n    if (startEvent.defaultPrevented) {\n      return\n    }\n\n    if (actives) {\n      actives.forEach((elemActive) => {\n        if (container !== elemActive) {\n          Collapse._collapseInterface(elemActive, 'hide')\n        }\n\n        if (!activesData) {\n          Data.setData(elemActive, DATA_KEY, null)\n        }\n      })\n    }\n\n    const dimension = this._getDimension()\n\n    this._element.classList.remove(ClassName.COLLAPSE)\n    this._element.classList.add(ClassName.COLLAPSING)\n\n    this._element.style[dimension] = 0\n\n    if (this._triggerArray.length) {\n      this._triggerArray.forEach((element) => {\n        element.classList.remove(ClassName.COLLAPSED)\n        element.setAttribute('aria-expanded', true)\n      })\n    }\n\n    this.setTransitioning(true)\n\n    const complete = () => {\n      this._element.classList.remove(ClassName.COLLAPSING)\n      this._element.classList.add(ClassName.COLLAPSE)\n      this._element.classList.add(ClassName.SHOW)\n\n      this._element.style[dimension] = ''\n\n      this.setTransitioning(false)\n\n      EventHandler.trigger(this._element, Event.SHOWN)\n    }\n\n    const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1)\n    const scrollSize = `scroll${capitalizedDimension}`\n    const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n    EventHandler.one(this._element, Util.TRANSITION_END, complete)\n\n    Util.emulateTransitionEnd(this._element, transitionDuration)\n    this._element.style[dimension] = `${this._element[scrollSize]}px`\n  }\n\n  hide() {\n    if (this._isTransitioning ||\n      !this._element.classList.contains(ClassName.SHOW)) {\n      return\n    }\n\n    const startEvent = EventHandler.trigger(this._element, Event.HIDE)\n    if (startEvent.defaultPrevented) {\n      return\n    }\n\n    const dimension = this._getDimension()\n\n    this._element.style[dimension] = `${this._element.getBoundingClientRect()[dimension]}px`\n\n    Util.reflow(this._element)\n\n    this._element.classList.add(ClassName.COLLAPSING)\n    this._element.classList.remove(ClassName.COLLAPSE)\n    this._element.classList.remove(ClassName.SHOW)\n\n    const triggerArrayLength = this._triggerArray.length\n    if (triggerArrayLength > 0) {\n      for (let i = 0; i < triggerArrayLength; i++) {\n        const trigger = this._triggerArray[i]\n        const selector = Util.getSelectorFromElement(trigger)\n\n        if (selector !== null) {\n          const elem = SelectorEngine.findOne(selector)\n\n          if (!elem.classList.contains(ClassName.SHOW)) {\n            trigger.classList.add(ClassName.COLLAPSED)\n            trigger.setAttribute('aria-expanded', false)\n          }\n        }\n      }\n    }\n\n    this.setTransitioning(true)\n\n    const complete = () => {\n      this.setTransitioning(false)\n      this._element.classList.remove(ClassName.COLLAPSING)\n      this._element.classList.add(ClassName.COLLAPSE)\n      EventHandler.trigger(this._element, Event.HIDDEN)\n    }\n\n    this._element.style[dimension] = ''\n    const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n    EventHandler.one(this._element, Util.TRANSITION_END, complete)\n    Util.emulateTransitionEnd(this._element, transitionDuration)\n  }\n\n  setTransitioning(isTransitioning) {\n    this._isTransitioning = isTransitioning\n  }\n\n  dispose() {\n    Data.removeData(this._element, DATA_KEY)\n\n    this._config          = null\n    this._parent          = null\n    this._element         = null\n    this._triggerArray    = null\n    this._isTransitioning = null\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...config\n    }\n    config.toggle = Boolean(config.toggle) // Coerce string values\n    Util.typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _getDimension() {\n    const hasWidth = this._element.classList.contains(Dimension.WIDTH)\n    return hasWidth ? Dimension.WIDTH : Dimension.HEIGHT\n  }\n\n  _getParent() {\n    let parent\n\n    if (Util.isElement(this._config.parent)) {\n      parent = this._config.parent\n\n      // it's a jQuery object\n      if (typeof this._config.parent.jquery !== 'undefined' || typeof this._config.parent[0] !== 'undefined') {\n        parent = this._config.parent[0]\n      }\n    } else {\n      parent = SelectorEngine.findOne(this._config.parent)\n    }\n\n    const selector =\n      `[data-toggle=\"collapse\"][data-parent=\"${this._config.parent}\"]`\n\n    Util.makeArray(SelectorEngine.find(selector, parent))\n      .forEach((element) => {\n        this._addAriaAndCollapsedClass(\n          Collapse._getTargetFromElement(element),\n          [element]\n        )\n      })\n\n    return parent\n  }\n\n  _addAriaAndCollapsedClass(element, triggerArray) {\n    if (element) {\n      const isOpen = element.classList.contains(ClassName.SHOW)\n\n      if (triggerArray.length) {\n        triggerArray.forEach((elem) => {\n          if (!isOpen) {\n            elem.classList.add(ClassName.COLLAPSED)\n          } else {\n            elem.classList.remove(ClassName.COLLAPSED)\n          }\n          elem.setAttribute('aria-expanded', isOpen)\n        })\n      }\n    }\n  }\n\n  // Static\n\n  static _getTargetFromElement(element) {\n    const selector = Util.getSelectorFromElement(element)\n    return selector ? SelectorEngine.findOne(selector) : null\n  }\n\n  static _collapseInterface(element, config) {\n    let data      = Data.getData(element, DATA_KEY)\n    const _config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(element),\n      ...typeof config === 'object' && config ? config : {}\n    }\n\n    if (!data && _config.toggle && /show|hide/.test(config)) {\n      _config.toggle = false\n    }\n\n    if (!data) {\n      data = new Collapse(element, _config)\n    }\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new Error(`No method named \"${config}\"`)\n      }\n      data[config]()\n    }\n  }\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      Collapse._collapseInterface(this, config)\n    })\n  }\n\n  static _getInstance(element) {\n    return Data.getData(element, DATA_KEY)\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nEventHandler.on(document, Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function (event) {\n  // preventDefault only for <a> elements (which change the URL) not inside the collapsible element\n  if (event.target.tagName === 'A') {\n    event.preventDefault()\n  }\n\n  const triggerData      = Manipulator.getDataAttributes(this)\n  const selector         = Util.getSelectorFromElement(this)\n  const selectorElements = Util.makeArray(SelectorEngine.find(selector))\n\n  selectorElements.forEach((element) => {\n    const data = Data.getData(element, DATA_KEY)\n    let config\n    if (data) {\n      // update parent attribute\n      if (data._parent === null && typeof triggerData.parent === 'string') {\n        data._config.parent = triggerData.parent\n        data._parent = data._getParent()\n      }\n      config = 'toggle'\n    } else {\n      config = triggerData\n    }\n\n    Collapse._collapseInterface(element, config)\n  })\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .collapse to jQuery only if jQuery is present\n */\n\nconst $ = Util.jQuery\nif (typeof $ !== 'undefined') {\n  const JQUERY_NO_CONFLICT  = $.fn[NAME]\n  $.fn[NAME]                = Collapse._jQueryInterface\n  $.fn[NAME].Constructor    = Collapse\n  $.fn[NAME].noConflict     = () => {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return Collapse._jQueryInterface\n  }\n}\n\nexport default Collapse\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","Default","toggle","parent","DefaultType","Event","SHOW","SHOWN","HIDE","HIDDEN","CLICK_DATA_API","ClassName","COLLAPSE","COLLAPSING","COLLAPSED","Dimension","WIDTH","HEIGHT","Selector","ACTIVES","DATA_TOGGLE","Collapse","element","config","_isTransitioning","_element","_config","_getConfig","_triggerArray","Util","makeArray","SelectorEngine","find","id","toggleList","i","len","length","elem","selector","getSelectorFromElement","filterElement","filter","foundElem","_selector","push","_parent","_getParent","_addAriaAndCollapsedClass","Data","setData","classList","contains","hide","show","actives","activesData","getAttribute","container","findOne","tempActiveData","getData","startEvent","EventHandler","trigger","defaultPrevented","forEach","elemActive","_collapseInterface","dimension","_getDimension","remove","add","style","setAttribute","setTransitioning","complete","capitalizedDimension","toUpperCase","slice","scrollSize","transitionDuration","getTransitionDurationFromElement","one","TRANSITION_END","emulateTransitionEnd","getBoundingClientRect","reflow","triggerArrayLength","isTransitioning","dispose","removeData","Boolean","typeCheckConfig","hasWidth","isElement","jquery","_getTargetFromElement","triggerArray","isOpen","data","Manipulator","getDataAttributes","test","Error","_jQueryInterface","each","_getInstance","on","document","event","target","tagName","preventDefault","triggerData","selectorElements","$","jQuery","JQUERY_NO_CONFLICT","fn","Constructor","noConflict"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}